<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Recover Your Identity | Death2Data</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
  font-family:ui-monospace,monospace;
  background:#000;
  color:#fff;
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:20px;
}

.container{
  max-width:500px;
  width:100%;
  text-align:center;
}

h1{
  font-size:2rem;
  margin-bottom:10px;
  color:#0f0;
}

.subtitle{
  color:#888;
  font-size:0.9rem;
  margin-bottom:40px;
  line-height:1.6;
}

.form-box{
  background:#0a0a0a;
  border:2px solid #222;
  padding:40px;
  margin:30px 0;
}

.form-group{
  margin-bottom:20px;
  text-align:left;
}

label{
  display:block;
  font-size:0.8rem;
  color:#888;
  margin-bottom:8px;
  letter-spacing:0.1em;
  text-transform:uppercase;
}

input[type="email"]{
  width:100%;
  padding:15px;
  background:#000;
  border:1px solid #333;
  color:#fff;
  font-family:inherit;
  font-size:1rem;
}

input[type="email"]:focus{
  outline:none;
  border-color:#0f0;
}

button{
  width:100%;
  padding:18px;
  background:#0f0;
  color:#000;
  border:none;
  font-family:inherit;
  font-weight:700;
  cursor:pointer;
  font-size:1rem;
  text-transform:uppercase;
  letter-spacing:0.1em;
  margin-top:10px;
}

button:hover{
  background:#fff;
}

button:disabled{
  background:#333;
  color:#666;
  cursor:not-allowed;
}

.message{
  margin-top:20px;
  padding:15px;
  background:#0a0a0a;
  border:1px solid #333;
  font-size:0.9rem;
  display:none;
}

.message.success{
  border-color:#0f0;
  color:#0f0;
  display:block;
}

.message.error{
  border-color:#f00;
  color:#f00;
  display:block;
}

.info-box{
  background:#050505;
  border:1px solid #222;
  padding:20px;
  margin-top:30px;
  text-align:left;
  font-size:0.85rem;
  color:#666;
  line-height:1.6;
}

.info-box h3{
  color:#0f0;
  font-size:0.9rem;
  margin-bottom:10px;
  letter-spacing:0.1em;
}

.info-box ul{
  margin-left:20px;
  margin-top:10px;
}

.info-box li{
  margin-bottom:8px;
}

.back-link{
  margin-top:30px;
  color:#666;
  text-decoration:none;
  font-size:0.9rem;
}

.back-link:hover{
  color:#0f0;
}

@media(max-width:768px){
  h1{
    font-size:1.5rem;
  }
  .form-box{
    padding:20px;
  }
}
</style>
<!-- SEO/AEO/LLMEO Head -->
<title>Recover - Death2Data</title>
<meta name="description" content="Recover page. Privacy-first tools for $1/month. No tracking. No ads.">
<meta name="keywords" content="recover, death2data, privacy tools">
<meta name="author" content="Death2Data">
<meta name="robots" content="index, follow">
<link rel="canonical" href="https://death2data.com/recover.html">

<!-- Open Graph (Facebook, LinkedIn, Discord) -->
<meta property="og:type" content="website">
<meta property="og:site_name" content="Death2Data">
<meta property="og:title" content="Recover - Death2Data">
<meta property="og:description" content="Recover page. Privacy-first tools for $1/month. No tracking. No ads.">
<meta property="og:url" content="https://death2data.com/recover.html">
<meta property="og:image" content="https://death2data.com/og-image.png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta property="og:locale" content="en_US">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@death2data">
<meta name="twitter:creator" content="@death2data">
<meta name="twitter:title" content="Recover - Death2Data">
<meta name="twitter:description" content="Recover page. Privacy-first tools for $1/month. No tracking. No ads.">
<meta name="twitter:image" content="https://death2data.com/og-image.png">

<!-- JSON-LD for AI Engines (GPT, Claude, Perplexity) -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "Recover - Death2Data",
  "description": "Recover page. Privacy-first tools for $1/month. No tracking. No ads.",
  "url": "https://death2data.com/recover.html",
  "provider": {
    "@type": "Organization",
    "name": "Death2Data",
    "url": "https://death2data.com",
    "email": "matt@death2data.com"
  }
}
</script>


<!-- Favicon -->
<link rel="icon" href="/favicon.svg" type="image/svg+xml">
<link rel="icon" href="/favicon.ico" sizes="32x32">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">

<!-- PWA -->
<link rel="manifest" href="/site.webmanifest">
<meta name="theme-color" content="#0a0a0a">

</head>
<body>

<div class="container">
  <h1>RECOVER YOUR IDENTITY</h1>
  <p class="subtitle">
    Enter the email you used when you paid your $1 subscription.<br>
    We'll send you a magic link to restore your D2D identity.
  </p>

  <div class="form-box">
    <form id="recover-form">
      <div class="form-group">
        <label for="email">Subscription Email</label>
        <input
          type="email"
          id="email"
          name="email"
          placeholder="you@example.com"
          required
          autocomplete="email"
        >
      </div>

      <button type="submit" id="submit-btn">
        Send Recovery Link
      </button>
    </form>

    <div id="message" class="message"></div>
  </div>

  <div class="info-box">
    <h3>HOW THIS WORKS</h3>
    <ul>
      <li>We check if your email has an active D2D subscription</li>
      <li>If found, we send a time-limited magic link to your email</li>
      <li>Click the link to restore your identity on this device</li>
      <li>Your identity will be saved to this browser's localStorage</li>
    </ul>

    <h3 style="margin-top:20px;">SECURITY</h3>
    <ul>
      <li>Magic links expire after 15 minutes</li>
      <li>One-time use only</li>
      <li>Requires active subscription</li>
      <li>Your private key is encrypted in transit</li>
    </ul>
  </div>

  <a href="/" class="back-link">← Back to Home</a>
</div>

<script>
const form = document.getElementById('recover-form');
const emailInput = document.getElementById('email');
const submitBtn = document.getElementById('submit-btn');
const messageBox = document.getElementById('message');

form.addEventListener('submit', async (e) => {
  e.preventDefault();

  const email = emailInput.value.trim();

  if (!email) {
    showMessage('Please enter your email', 'error');
    return;
  }

  // Disable form
  submitBtn.disabled = true;
  submitBtn.textContent = 'Sending...';
  messageBox.style.display = 'none';

  try {
    // Call Netlify function to send magic link
    const response = await fetch('/.netlify/functions/send-magic-link', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({ email })
    });

    const data = await response.json();

    if (response.ok) {
      showMessage(
        `✓ Recovery link sent to ${email}! Check your inbox (and spam folder).`,
        'success'
      );
      form.reset();
    } else {
      showMessage(
        data.error || 'Failed to send recovery link. Please try again.',
        'error'
      );
    }
  } catch (error) {
    console.error('Recovery error:', error);
    showMessage(
      'Network error. Please check your connection and try again.',
      'error'
    );
  } finally {
    submitBtn.disabled = false;
    submitBtn.textContent = 'Send Recovery Link';
  }
});

function showMessage(text, type) {
  messageBox.textContent = text;
  messageBox.className = 'message ' + type;
  messageBox.style.display = 'block';
}
</script>

</body>
</html>
