<!DOCTYPE html>
<html><head><title>D2D Debug</title>
<style>
body { background:#000; color:#00cc44; font-family:monospace; padding:40px; }
.item { margin:10px 0; padding:10px; background:#111; border:1px solid #333; }
.key { color:#00cc44; }
.val { color:#fff; }
.missing { color:#f66; }
button { background:#00cc44; color:#000; border:none; padding:10px 20px; cursor:pointer; font-weight:bold; margin:5px; border-radius:4px; }
</style></head><body>
<h1>D2D Local Debug</h1>
<p style="color:#666;">Nothing leaves your browser. This just reads localStorage.</p>
<div id="out"></div>
<br>
<button onclick="fixAccess()">Fix: Set Paid Tier</button>
<button onclick="resetUsage()">Fix: Reset Browse Usage</button>
<button onclick="location.href='/browse.html'">Go to Browse â†’</button>
<script>
var keys = ['d2d_email','d2d_paid','d2d_access','d2d_browse_usage','d2d_browse_date','d2d_moniker','d2d_pubkey','d2d_privkey'];
var html = '';
keys.forEach(function(k){
  var v = localStorage.getItem(k);
  if(v) html += '<div class="item"><span class="key">'+k+'</span> = <span class="val">'+v+'</span></div>';
  else html += '<div class="item"><span class="key">'+k+'</span> = <span class="missing">NOT SET</span></div>';
});
document.getElementById('out').innerHTML = html;

function fixAccess(){
  localStorage.setItem('d2d_access', JSON.stringify({tier:100}));
  localStorage.setItem('d2d_paid','true');
  location.reload();
}
function resetUsage(){
  localStorage.setItem('d2d_browse_usage','0');
  localStorage.setItem('d2d_browse_date','');
  location.reload();
}
</script></body></html>
