<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Analytics | D2D</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
  font-family:ui-monospace,monospace;
  background:#000;
  color:#fff;
  min-height:100vh;
  padding:40px 20px;
}

main{
  max-width:1200px;
  margin:0 auto;
}

h1{
  font-size:2.5rem;
  margin-bottom:10px;
  color:#0f0;
}

.subtitle{
  color:#666;
  font-size:0.9rem;
  margin-bottom:40px;
}

.stats-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
  gap:20px;
  margin-bottom:40px;
}

.stat-card{
  background:#0a0a0a;
  border:1px solid #222;
  padding:30px;
}

.stat-card h2{
  font-size:0.75rem;
  color:#666;
  letter-spacing:0.2em;
  margin-bottom:10px;
}

.stat-card .number{
  font-size:3rem;
  color:#0f0;
  font-weight:700;
  line-height:1;
  margin-bottom:10px;
}

.stat-card .change{
  font-size:0.85rem;
  color:#666;
}

.stat-card .change.positive{
  color:#0f0;
}

.chart-section{
  background:#0a0a0a;
  border:1px solid #222;
  padding:30px;
  margin-bottom:40px;
}

.chart-section h2{
  font-size:1.2rem;
  color:#0f0;
  margin-bottom:20px;
}

.privacy-note{
  background:#050505;
  border:1px solid #f00;
  padding:20px;
  margin-bottom:40px;
  color:#f00;
  font-size:0.85rem;
  line-height:1.7;
}

.privacy-note h3{
  margin-bottom:10px;
  letter-spacing:0.1em;
}

.refresh-btn{
  padding:12px 24px;
  background:#0f0;
  color:#000;
  border:none;
  font-family:inherit;
  font-weight:700;
  cursor:pointer;
  margin-bottom:20px;
}

.refresh-btn:hover{
  background:#fff;
}

.timestamp{
  color:#666;
  font-size:0.75rem;
  margin-bottom:30px;
}

.loading{
  text-align:center;
  padding:60px;
  color:#666;
  font-size:1.2rem;
}

.error{
  background:#050505;
  border:1px solid #f00;
  padding:20px;
  color:#f00;
  margin:20px 0;
}

.simple-bar{
  display:flex;
  gap:10px;
  margin:20px 0;
}

.simple-bar .bar{
  flex:1;
  background:#0a0a0a;
  border:1px solid #222;
  padding:20px;
  text-align:center;
}

.simple-bar .bar .label{
  font-size:0.75rem;
  color:#666;
  margin-bottom:10px;
}

.simple-bar .bar .value{
  font-size:1.5rem;
  color:#0f0;
  font-weight:700;
}

@media(max-width:768px){
  .stats-grid{
    grid-template-columns:1fr;
  }
  .simple-bar{
    flex-direction:column;
  }
}
</style>
<!-- SEO/AEO/LLMEO Head -->
<title>Analytics - Death2Data</title>
<meta name="description" content="Analytics page. Privacy-first tools for $1/month. No tracking. No ads.">
<meta name="keywords" content="analytics, death2data, privacy tools">
<meta name="author" content="Death2Data">
<meta name="robots" content="index, follow">
<link rel="canonical" href="https://death2data.com/analytics.html">

<!-- Open Graph (Facebook, LinkedIn, Discord) -->
<meta property="og:type" content="website">
<meta property="og:site_name" content="Death2Data">
<meta property="og:title" content="Analytics - Death2Data">
<meta property="og:description" content="Analytics page. Privacy-first tools for $1/month. No tracking. No ads.">
<meta property="og:url" content="https://death2data.com/analytics.html">
<meta property="og:image" content="https://death2data.com/og-image.png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta property="og:locale" content="en_US">

<!-- Twitter Cards -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@death2data">
<meta name="twitter:creator" content="@death2data">
<meta name="twitter:title" content="Analytics - Death2Data">
<meta name="twitter:description" content="Analytics page. Privacy-first tools for $1/month. No tracking. No ads.">
<meta name="twitter:image" content="https://death2data.com/og-image.png">

<!-- JSON-LD for AI Engines (GPT, Claude, Perplexity) -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebPage",
  "name": "Analytics - Death2Data",
  "description": "Analytics page. Privacy-first tools for $1/month. No tracking. No ads.",
  "url": "https://death2data.com/analytics.html",
  "provider": {
    "@type": "Organization",
    "name": "Death2Data",
    "url": "https://death2data.com",
    "email": "matt@death2data.com"
  }
}
</script>


<!-- Favicon -->
<link rel="icon" href="/favicon.svg" type="image/svg+xml">
<link rel="icon" href="/favicon.ico" sizes="32x32">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">

<!-- PWA -->
<link rel="manifest" href="/site.webmanifest">
<meta name="theme-color" content="#0a0a0a">

</head>
<body>

<main>
  <h1>D2D ANALYTICS</h1>
  <p class="subtitle">Privacy-preserving metrics. No user tracking. Just aggregates.</p>

  <div class="privacy-note">
    <h3>⚠️ WHAT WE TRACK</h3>
    <p><strong>YES:</strong> Total member count, MRR, subscription status (from Stripe)</p>
    <p><strong>NO:</strong> Individual usage, tool access, search queries, file parsing, identity signatures</p>
    <p><strong>WHY:</strong> These metrics don't exist. Data is stored locally on YOUR device, not our servers.</p>
  </div>

  <button class="refresh-btn" onclick="loadStats()">Refresh Stats</button>
  <div class="timestamp" id="timestamp"></div>

  <div id="loading" class="loading">Loading stats...</div>
  <div id="error" class="error" style="display:none"></div>

  <div id="stats-content" style="display:none">
    <div class="stats-grid">
      <div class="stat-card">
        <h2>TOTAL MEMBERS</h2>
        <div class="number" id="total-members">--</div>
        <div class="change" id="members-change">--</div>
      </div>

      <div class="stat-card">
        <h2>MONTHLY REVENUE (MRR)</h2>
        <div class="number" id="mrr">$--</div>
        <div class="change" id="mrr-change">--</div>
      </div>

      <div class="stat-card">
        <h2>ACTIVE SUBS</h2>
        <div class="number" id="active-subs">--</div>
        <div class="change" id="subs-change">--</div>
      </div>

      <div class="stat-card">
        <h2>TOTAL SEARCHES</h2>
        <div class="number" id="growth-rate">--</div>
        <div class="change" id="growth-change">--</div>
      </div>
    </div>

    <div class="chart-section">
      <h2>TOP SEARCH QUERIES (Privacy-Safe)</h2>
      <p style="color:#666;font-size:0.85rem;margin-bottom:20px">Queries logged anonymously - no user IDs</p>

      <div class="simple-bar">
        <div class="bar">
          <div class="label">#1</div>
          <div class="value" id="tier-1">none</div>
        </div>
        <div class="bar">
          <div class="label">#2</div>
          <div class="value" id="tier-2">none</div>
        </div>
        <div class="bar">
          <div class="label">#3</div>
          <div class="value" id="tier-3">none</div>
        </div>
      </div>
    </div>

    <div class="chart-section">
      <h2>WHAT THIS DATA MEANS</h2>
      <div style="color:#888;line-height:1.8;font-size:0.9rem">
        <p style="margin-bottom:15px"><strong style="color:#0f0">Total Members:</strong> Number of active paying subscriptions. Pulled from Stripe API. We don't know WHO they are (payment ID ≠ crypto identity).</p>

        <p style="margin-bottom:15px"><strong style="color:#0f0">MRR:</strong> Monthly Recurring Revenue. Sum of all active subscriptions. Target: $4,200 (sustainable forever).</p>

        <p style="margin-bottom:15px"><strong style="color:#0f0">Active Subs:</strong> Subscriptions in "active" state. Excludes canceled, expired, or trialing.</p>

        <p style="margin-bottom:15px"><strong style="color:#0f0">Growth Rate:</strong> Week-over-week member growth. Goal: 10% per week until we hit 4,200 members.</p>

        <p style="margin-bottom:15px"><strong style="color:#0f0">Tiers:</strong> Members are assigned tiers based on when they joined. First 100 = $1/month forever. 101-1000 = $2/month. 1001+ = $12/month.</p>
      </div>
    </div>

    <div class="chart-section">
      <h2>WHAT WE DON'T TRACK</h2>
      <div style="color:#666;line-height:1.8;font-size:0.9rem">
        <p style="margin-bottom:10px">❌ Individual tool usage (who used what)</p>
        <p style="margin-bottom:10px">❌ Search queries (stored locally)</p>
        <p style="margin-bottom:10px">❌ File parsing activity (happens client-side)</p>
        <p style="margin-bottom:10px">❌ Identity signatures (you own your keys)</p>
        <p style="margin-bottom:10px">❌ Device info, IP addresses, user agents</p>
        <p style="margin-bottom:10px">❌ Session tracking, cookies, fingerprinting</p>
        <p style="margin-bottom:15px">❌ Third-party analytics (no Google Analytics, no Mixpanel, nothing)</p>

        <p style="color:#0f0"><strong>Why?</strong> Because the data doesn't exist on our servers. It's on YOUR device.</p>
      </div>
    </div>
  </div>
</main>

<script>
// ═══════════════════════════════════════════════════════════════════════════════
// ANALYTICS (Privacy-Preserving)
// ═══════════════════════════════════════════════════════════════════════════════

async function loadStats() {
  document.getElementById('loading').style.display = 'block';
  document.getElementById('error').style.display = 'none';
  document.getElementById('stats-content').style.display = 'none';

  try {
    // Fetch real stats from worker API
    const response = await fetch('https://api.death2data.com/analytics');

    if (!response.ok) {
      throw new Error(`HTTP ${response.status}: ${response.statusText}`);
    }

    const stats = await response.json();

    // Update UI - Membership Stats
    document.getElementById('total-members').textContent = stats.totalMembers || 0;
    document.getElementById('members-change').textContent = `+${stats.newMembersThisWeek || 0} this week`;
    document.getElementById('members-change').className = 'change positive';

    document.getElementById('mrr').textContent = `$${stats.mrr || '0.00'}`;
    document.getElementById('mrr-change').textContent = stats.newMembersThisWeek > 0 ? 'Growing' : 'Stable';
    document.getElementById('mrr-change').className = stats.newMembersThisWeek > 0 ? 'change positive' : 'change';

    document.getElementById('active-subs').textContent = stats.activeSubs || 0;
    document.getElementById('subs-change').textContent = 'All active';
    document.getElementById('subs-change').className = 'change positive';

    document.getElementById('growth-rate').textContent = `${stats.totalSearches || 0}`;
    document.getElementById('growth-change').textContent = `${stats.searchesThisWeek || 0} this week`;
    document.getElementById('growth-change').className = 'change positive';

    // Tiers - show top queries instead
    const topQueries = stats.topQueries || [];
    document.getElementById('tier-1').textContent = topQueries[0]?.query || 'none';
    document.getElementById('tier-2').textContent = topQueries[1]?.query || 'none';
    document.getElementById('tier-3').textContent = topQueries[2]?.query || 'none';

    // Timestamp
    document.getElementById('timestamp').textContent = `Last updated: ${new Date().toLocaleString()}`;

    // Show stats
    document.getElementById('loading').style.display = 'none';
    document.getElementById('stats-content').style.display = 'block';

  } catch (e) {
    document.getElementById('loading').style.display = 'none';
    document.getElementById('error').textContent = `Error loading stats: ${e.message}`;
    document.getElementById('error').style.display = 'block';
  }
}

// Load stats on page load
loadStats();
</script>

</body>
</html>
